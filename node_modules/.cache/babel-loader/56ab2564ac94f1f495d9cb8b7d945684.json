{"ast":null,"code":"import _classCallCheck from \"/Users/chetna/Desktop/Site/my-app/choco-corp/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/chetna/Desktop/Site/my-app/choco-corp/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/chetna/Desktop/Site/my-app/choco-corp/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/chetna/Desktop/Site/my-app/choco-corp/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/chetna/Desktop/Site/my-app/choco-corp/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/chetna/Desktop/Site/my-app/choco-corp/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/chetna/Desktop/Site/my-app/choco-corp/src/components/LoginPage.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators, compose } from 'redux';\nimport * as actions from '../actions/index';\n\nfunction validate(rut, password) {\n  // true means invalid, so our conditions got reversed\n  return {\n    rut: rut.length === 0,\n    password: password.length === 0\n  };\n}\n\nvar LoginPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LoginPage, _Component);\n\n  function LoginPage(props) {\n    var _this;\n\n    _classCallCheck(this, LoginPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LoginPage).call(this, props));\n    _this.state = {\n      rut: \"\",\n      password: \"\",\n      everFocusedRut: false,\n      everFocusedPassword: false,\n      inFocus: \"\",\n      errors: {},\n      blockError: false,\n      invalidRut: false,\n      errorStatus: false,\n      validRut: false,\n      wentWrong: false,\n      isLoading: false,\n      invalidRutPassword: false\n    };\n    _this.handleRutChange = _this.handleRutChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handlePasswordChange = _this.handlePasswordChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onCheckValidRut = _this.onCheckValidRut.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(LoginPage, [{\n    key: \"handleRutChange\",\n    value: function handleRutChange(name, rutt) {\n      document.getElementById(\"rut\").classList.remove(\"error\");\n      document.getElementById('wentWrong').style.display = \"none\";\n\n      if (this.state.everFocusedRut) {\n        document.getElementById(\"rut\").classList.remove(\"error\");\n        document.getElementById(\"rut\").classList.add(\"formLogin\");\n        this.state.everFocusedRut = false;\n      } //this.state.errorStatus = false;\n\n\n      this.state.errors.rut = \"\";\n      var rutError = document.getElementById(\"rut\");\n      rutError.classList.remove(\"invalid-field\");\n      var passwordError = document.getElementById(\"password\");\n      passwordError.classList.remove(\"invalid-field\");\n      var checkString = document.getElementById(\"rut\").value;\n\n      if (checkString.indexOf('.') != -1) {\n        checkString = checkString.split(\".\").join('');\n      }\n\n      if (/[^kK0-9-\\d]/.test(checkString)) {\n        this.setState({\n          errorStatus: true,\n          everFocusedRut: true,\n          isLoading: false\n        });\n        this.state.errors.rut = \"Por favor, digite apenas letra e caracteres numéricos\"; //only nos and characters\n\n        document.getElementById(\"rut\").classList.remove(\"formLogin\");\n        document.getElementById(\"rut\").classList.add(\"error\");\n        return false;\n      }\n\n      var valor = document.getElementById(\"rut\").value.split(\".\").join(''); // Despejar Guión\n\n      valor = valor.replace('-', ''); // Aislar Cuerpo y Dígito Verificador\n\n      var cuerpo = valor.slice(0, -1);\n      var dv = valor.slice(-1).toUpperCase(); // Formatear RUN\n\n      rutt = cuerpo + '-' + dv;\n\n      if (checkString.length == 0 && rutt.length == 1) {\n        rutt = \"\";\n      }\n\n      if (rutt.split(\"-\").length > 2) {\n        this.state.validRut = false;\n        this.setState({\n          errorStatus: true,\n          everFocusedRut: true\n        });\n        this.state.errors.rut = \"Por favor, digite apenas letra e caracteres numéricos\"; //only nos and characters\n\n        document.getElementById(\"rut\").classList.add(\"error\");\n        return false;\n      }\n\n      this.setState({\n        rut: rutt,\n        invalidRut: false,\n        invalidRutPassword: false,\n        errorStatus: false,\n        everFocusedRut: false,\n        isLoading: false\n      }); // Si no cumple con el mínimo ej. (n.nnn.nnn)\n\n      if (cuerpo.length < 7) {\n        this.state.validRut = false;\n        return false;\n      }\n\n      if (cuerpo.length > 10) {\n        this.state.validRut = false;\n        return false;\n      } // Calcular Dígito Verificador\n\n\n      var suma = 0;\n      var multiplo = 2; // Para cada dígito del Cuerpo\n\n      for (var i = 1; i <= cuerpo.length; i++) {\n        // Obtener su Producto con el Múltiplo Correspondiente\n        var index = multiplo * valor.charAt(cuerpo.length - i); // Sumar al Contador General\n\n        suma = suma + index; // Consolidar Múltiplo dentro del rango [2,7]\n\n        if (multiplo < 7) {\n          multiplo = multiplo + 1;\n        } else {\n          multiplo = 2;\n        }\n\n        this.state.validRut = false;\n      } // Calcular Dígito Verificador en base al Módulo 11\n\n\n      var dvEsperado = 11 - suma % 11; // Casos Especiales (0 y K)\n\n      dv = dv == 'K' ? 10 : dv;\n      dv = dv == 0 ? 11 : dv; // Validar que el Cuerpo coincide con su Dígito Verificador\n\n      if (dvEsperado != dv) {\n        this.state.validRut = false;\n        this.setState({\n          invalidRut: true,\n          isLoading: false\n        });\n        document.getElementById(\"rut\").classList.add(\"error\");\n        return false;\n      } else {\n        document.getElementById(\"rut\").classList.remove(\"error\");\n        this.setState({\n          validRut: true\n        });\n      }\n    }\n  }, {\n    key: \"handlePasswordChange\",\n    value: function handlePasswordChange(evt) {\n      this.state.errorStatus = false;\n      document.getElementById('wentWrong').style.display = \"none\";\n      this.state.errors.password = \"\";\n      this.setState({\n        password: evt.target.value,\n        isLoading: false,\n        invalidRutPassword: false\n      });\n      var rutError = document.getElementById(\"rut\");\n      rutError.classList.remove(\"invalid-field\");\n      var passwordError = document.getElementById(\"password\");\n      passwordError.classList.remove(\"invalid-field\");\n    }\n  }, {\n    key: \"onCheckValidRut\",\n    value: function onCheckValidRut() {\n      var checkString = document.getElementById(\"rut\").value;\n\n      if (/[^A-Za-z0-9._-\\d]/.test(checkString)) {\n        this.setState({\n          errorStatus: true,\n          everFocusedRut: true\n        });\n        this.state.errors.rut = \"Por favor, digite apenas letra e caracteres numéricos\"; //only nos and characters\n\n        document.getElementById(\"rut\").classList.remove(\"formLogin\");\n        document.getElementById(\"rut\").classList.add(\"error\");\n        return false;\n      }\n\n      if (this.state.validRut == false) {\n        this.setState({\n          invalidRut: true\n        });\n        document.getElementById(\"rut\").classList.add(\"error\");\n      } else {\n        this.setState({\n          invalidRut: false,\n          errorStatus: false,\n          everFocusedRut: false\n        });\n        document.getElementById(\"rut\").classList.remove(\"error\");\n      }\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(evt) {\n      var _this2 = this;\n\n      evt.preventDefault();\n      var required = \"This field is required!\";\n      var errors = this.state.errors;\n      var checkString = document.getElementById(\"rut\").value;\n\n      if (!this.state.rut) {\n        var rutError = document.getElementById(\"rut\");\n        rutError.classList.add(\"invalid-field\");\n        this.state.errorStatus = true;\n        errors.rut = \"Rut es obligatorio!!\";\n      }\n\n      if (!this.state.password) {\n        this.state.errorStatus = true;\n        errors.password = \"La clave es obligatoria!!\";\n        var passwordError = document.getElementById(\"password\");\n        passwordError.classList.add(\"invalid-field\");\n      }\n\n      if (this.state.rut) {\n        // this.context.router.push('/create-password');\n        if (/[^A-Za-z0-9._-\\d]/.test(checkString)) {\n          this.setState({\n            errorStatus: true,\n            everFocusedRut: true\n          });\n          errors.rut = \"Por favor, digite apenas letra e caracteres numéricos\"; //only nos and characters\n\n          document.getElementById(\"rut\").classList.remove(\"formLogin\");\n          document.getElementById(\"rut\").classList.add(\"error\");\n          this.state.everFocusedRut = true;\n          return false;\n        } else {\n          if (this.state.password) {\n            if (this.state.rut.length > 7 && this.state.validRut) {\n              this.setState({\n                isLoading: !this.state.isLoading\n              });\n              var loginData = {\n                username: this.state.rut,\n                password: this.state.password,\n                client_id: \"restClient\",\n                client_secret: \"restSecret\",\n                grant_type: \"password\",\n                scope: \"portalConvenios\"\n              };\n              actions.checkLogin(loginData).done(function (data, status, headers) {\n                if (data.loginResponse && data.loginResponse.serviceStatus && data.loginResponse.serviceStatus.code == 200) {\n                  _this2.props.actions.saveAuthDataToStore(data);\n\n                  _this2.setState({\n                    isLoading: false\n                  });\n\n                  var value = data.loginResponse && data.loginResponse.solicitud && data.loginResponse.solicitud.length && data.loginResponse.solicitud.length > 0 ? data.loginResponse.solicitud[0].idSolicitud : \"\";\n                  var roles = data.loginResponse.solicitud && data.loginResponse.solicitud.length && data.loginResponse.solicitud.length > 0 && data.loginResponse.solicitud[0] && data.loginResponse.solicitud[0].moduleAccess ? data.loginResponse.solicitud[0].moduleAccess : \"\";\n                  roles = roles.map(function (x) {\n                    return x.toLowerCase();\n                  });\n                  localStorage.setItem('solicitud', value);\n                  localStorage.setItem('rut', loginData.username);\n                  localStorage.setItem('roles', JSON.stringify(roles));\n                  localStorage.setItem('lastlogin', data.loginResponse.lasLogin);\n                  localStorage.setItem('access_token', data.access_token);\n                  localStorage.setItem('ref-auth', data.refresh_token);\n\n                  if (JSON.parse(localStorage.getItem('roles')).indexOf('admin') !== -1 || JSON.parse(localStorage.getItem('roles')).indexOf('home') !== -1) {\n                    _this2.context.router.push('/app/start');\n                  } else if (JSON.parse(localStorage.getItem('roles')).indexOf('vobo') !== -1) {\n                    _this2.context.router.push('/app/visto-buena');\n                  } else if (JSON.parse(localStorage.getItem('roles')).indexOf('beneficios') !== -1) {\n                    _this2.context.router.push('/app/benefits-alliances');\n                  } else if (JSON.parse(localStorage.getItem('roles')).indexOf('info_finance') !== -1) {\n                    _this2.context.router.push('/app/financial-information');\n                  } else if (JSON.parse(localStorage.getItem('roles')).indexOf('user_search') !== -1) {\n                    _this2.context.router.push('/app/search-partner');\n                  } else if (JSON.parse(localStorage.getItem('roles')).indexOf('planillas') !== -1) {\n                    _this2.context.router.push('/app/planning');\n                  } else if (JSON.parse(localStorage.getItem('roles')).indexOf('user_admin') !== -1) {\n                    _this2.context.router.push('/app/profile-administrator');\n                  } else {\n                    _this2.context.router.push('/app/default-app');\n                  }\n                }\n\n                if (data && data.loginResponse && data.loginResponse.serviceStatus && data.loginResponse.serviceStatus.code && data.loginResponse.serviceStatus.code == 400) {\n                  _this2.setState({\n                    invalidRut: false,\n                    wentWrong: false,\n                    blockError: true,\n                    isLoading: false\n                  });\n                }\n\n                if (data && data.loginResponse && data.loginResponse.serviceStatus && data.loginResponse.serviceStatus.code && data.loginResponse.serviceStatus.code == 300 && data.loginResponse.resetPassword == true) {\n                  _this2.props.actions.saveAuthDataToStore(data);\n\n                  var _value = data.loginResponse && data.loginResponse.solicitud && data.loginResponse.solicitud.length && data.loginResponse.solicitud.length > 0 ? data.loginResponse.solicitud[0].idSolicitud : \"\";\n\n                  localStorage.setItem('rut', loginData.username);\n                  localStorage.setItem('solicitud', _value);\n                  localStorage.setItem('lastlogin', data.loginResponse.lasLogin);\n                  localStorage.setItem('access_token', data.access_token);\n                  localStorage.setItem('ref-auth', data.refresh_token);\n\n                  _this2.context.router.push('/create-password');\n                }\n\n                if (data && data.loginResponse && data.loginResponse.serviceStatus && data.loginResponse.serviceStatus.code && data.loginResponse.serviceStatus.code == 500) {\n                  _this2.setState({\n                    wentWrong: false,\n                    blockError: false,\n                    invalidRutPassword: true,\n                    isLoading: false\n                  });\n                }\n\n                if (data && data.loginResponse && data.loginResponse.serviceStatus && data.loginResponse.serviceStatus.code && data.loginResponse.serviceStatus.code == 800) {\n                  _this2.setState({\n                    wentWrong: true,\n                    blockError: false,\n                    invalidRut: false,\n                    isLoading: false\n                  });\n                }\n              });\n            } else {\n              this.setState({\n                invalidRut: false,\n                errorStatus: true,\n                isLoading: false\n              });\n              errors.rut = \"Rut o contraseña inválida \";\n              var rutError = document.getElementById(\"rut\");\n              rutError.classList.add(\"invalid-field\");\n            }\n          } else {\n            this.state.errorStatus = true;\n            errors.rut = \"\";\n            errors.password = \"La clave es obligatoria!!\";\n            var passwordError = document.getElementById(\"password\");\n            passwordError.classList.add(\"invalid-field\");\n          }\n        }\n      }\n\n      this.setState({\n        errors: errors\n      });\n\n      if (Object.keys(errors).length) {\n        return '';\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var t = this.props.t;\n      return React.createElement(\"div\", {\n        class: \"user-pages login-page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"container user-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"user-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      }, this.state.blockError ? React.createElement(\"div\", {\n        class: \"msg error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        class: \"fa fa-warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333\n        },\n        __self: this\n      }, \"user-blocked\"))) : \"\", this.state.wentWrong ? React.createElement(\"div\", {\n        class: \"msg error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        class: \"fa fa-warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344\n        },\n        __self: this\n      }, \"something-went-wrong\"))) : \"\", React.createElement(\"div\", {\n        id: \"wentWrong\",\n        class: \"msg error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        class: \"fa fa-warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353\n        },\n        __self: this\n      }, \"something-went-wrong\"))), this.state.invalidRut ? React.createElement(\"div\", {\n        class: \"msg error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        class: \"fa fa-warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362\n        },\n        __self: this\n      }, \"invalid-rut\"))) : \"\", this.state.invalidRutPassword ? React.createElement(\"div\", {\n        class: \"msg error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        class: \"fa fa-warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372\n        },\n        __self: this\n      }, \"invalid-rut-password\"))) : \"\", this.state.errorStatus ? React.createElement(\"div\", {\n        class: \"msg error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 377\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 378\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        class: \"fa fa-warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 381\n        },\n        __self: this\n      }, this.state.errors.rut ? React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 382\n        },\n        __self: this\n      }, this.state.errors.rut) : \"\", this.state.errors.password ? React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 383\n        },\n        __self: this\n      }, this.state.errors.password) : \"\")) : \"\", React.createElement(\"div\", {\n        class: \"form-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 386\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 387\n        },\n        __self: this\n      }, \"login-page-text\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 388\n        },\n        __self: this\n      }, \"login-page-second-text\")), React.createElement(\"div\", {\n        class: \"user-form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 390\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 391\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        id: \"rut\",\n        class: \"form-control\",\n        name: \"rut\",\n        value: this.state.rut,\n        onChange: function onChange(e) {\n          return _this3.handleRutChange(\"rut\", e.target.value);\n        },\n        onBlur: this.onCheckValidRut,\n        placeholder: \"userid\",\n        maxLength: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 393\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        class: \"hint\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394\n        },\n        __self: this\n      }, \"example-id\")), React.createElement(\"div\", {\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 396\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"password\",\n        id: \"password\",\n        class: \"form-control\",\n        name: \"password\",\n        value: this.state.password,\n        onChange: this.handlePasswordChange,\n        placeholder: \"password\",\n        maxLength: \"8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 397\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"form-actions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 399\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"#/request-password-captcha\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401\n        },\n        __self: this\n      }, \"solitud-id\")), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 403\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        class: \"btn btn-primary\",\n        onClick: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 404\n        },\n        __self: this\n      }, \"user-login\"))))))));\n    }\n  }]);\n\n  return LoginPage;\n}(Component);\n\nLoginPage.contextTypes = {\n  router: PropTypes.object.isRequired\n};\nLoginPage.propTypes = {\n  auth: PropTypes.object.isRequired,\n  userData: PropTypes.object.isRequired,\n  actions: PropTypes.object.isRequired\n};\n\nfunction mapStateToProps(state) {\n  return {\n    auth: state.auth,\n    userData: state.userData\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators(actions, dispatch)\n  };\n}\n\nexport default compose(connect(mapStateToProps, mapDispatchToProps))(LoginPage);","map":{"version":3,"sources":["/Users/chetna/Desktop/Site/my-app/choco-corp/src/components/LoginPage.js"],"names":["React","Component","PropTypes","connect","bindActionCreators","compose","actions","validate","rut","password","length","LoginPage","props","state","everFocusedRut","everFocusedPassword","inFocus","errors","blockError","invalidRut","errorStatus","validRut","wentWrong","isLoading","invalidRutPassword","handleRutChange","bind","handlePasswordChange","handleSubmit","onCheckValidRut","name","rutt","document","getElementById","classList","remove","style","display","add","rutError","passwordError","checkString","value","indexOf","split","join","test","setState","valor","replace","cuerpo","slice","dv","toUpperCase","suma","multiplo","i","index","charAt","dvEsperado","evt","target","preventDefault","required","loginData","username","client_id","client_secret","grant_type","scope","checkLogin","done","data","status","headers","loginResponse","serviceStatus","code","saveAuthDataToStore","solicitud","idSolicitud","roles","moduleAccess","map","x","toLowerCase","localStorage","setItem","JSON","stringify","lasLogin","access_token","refresh_token","parse","getItem","context","router","push","resetPassword","Object","keys","t","e","contextTypes","object","isRequired","propTypes","auth","userData","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { connect } from 'react-redux';\nimport { bindActionCreators,compose } from 'redux';\nimport * as actions from '../actions/index';\n\n\n\n\nfunction validate(rut, password) {\n  // true means invalid, so our conditions got reversed\n  return {\n    rut: rut.length === 0,\n    password: password.length === 0,\n  };\n}\n\n\nclass LoginPage extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      rut:\"\",\n      password:\"\",\n      everFocusedRut: false,\n      everFocusedPassword: false,\n      inFocus: \"\",\n      errors : {},\n      blockError : false,\n      invalidRut: false,\n      errorStatus : false,\n      validRut : false,\n      wentWrong : false,\n      isLoading : false,\n      invalidRutPassword : false,\n    }\n\n    this.handleRutChange = this.handleRutChange.bind(this);\n    this.handlePasswordChange = this.handlePasswordChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.onCheckValidRut = this.onCheckValidRut.bind(this)\n\n  }\n\n \n\n  handleRutChange(name,rutt){\n    document.getElementById(\"rut\").classList.remove(\"error\");\n    document.getElementById('wentWrong').style.display = \"none\";\n    if(this.state.everFocusedRut){\n      document.getElementById(\"rut\").classList.remove(\"error\");\n      document.getElementById(\"rut\").classList.add(\"formLogin\");\n      this.state.everFocusedRut = false;\n    }\n    //this.state.errorStatus = false;\n    this.state.errors.rut = \"\" ;\n    var rutError = document.getElementById(\"rut\");\n    rutError.classList.remove(\"invalid-field\");\n    var passwordError = document.getElementById(\"password\");\n    passwordError.classList.remove(\"invalid-field\");\n\n    var checkString = document.getElementById(\"rut\").value;\n    if (checkString.indexOf('.') != -1) {\n       checkString = checkString.split(\".\").join('')\n    }\n\n    if ( /[^kK0-9-\\d]/.test(checkString)) {\n      this.setState({errorStatus : true,everFocusedRut:true,isLoading : false })\n      this.state.errors.rut = \"Por favor, digite apenas letra e caracteres numéricos\"; //only nos and characters\n      document.getElementById(\"rut\").classList.remove(\"formLogin\");\n      document.getElementById(\"rut\").classList.add(\"error\");\n      return (false);\n    }\n\n    let  valor = document.getElementById(\"rut\").value.split(\".\").join('');\n        // Despejar Guión\n    valor = valor.replace('-','');\n\n    // Aislar Cuerpo y Dígito Verificador\n    let cuerpo = valor.slice(0,-1);\n    let dv = valor.slice(-1).toUpperCase();\n\n\n    // Formatear RUN\n    rutt = cuerpo + '-'+ dv\n\n    if (checkString.length == 0 &&  rutt.length == 1) {\n       rutt = \"\";\n    }\n    if (rutt.split(\"-\").length > 2) {\n       this.state.validRut = false;\n       this.setState({errorStatus : true,everFocusedRut:true})\n       this.state.errors.rut = \"Por favor, digite apenas letra e caracteres numéricos\"; //only nos and characters\n       document.getElementById(\"rut\").classList.add(\"error\");\n       return false;\n    }\n\n    this.setState({ rut : rutt,invalidRut : false,invalidRutPassword:false ,errorStatus : false,everFocusedRut:false,isLoading : false });\n\n    // Si no cumple con el mínimo ej. (n.nnn.nnn)\n    if(cuerpo.length < 7) {\n      this.state.validRut = false;\n      return false;\n    }\n\n    if(cuerpo.length > 10) {\n      this.state.validRut = false;\n      return false;\n    }\n\n    // Calcular Dígito Verificador\n    let suma = 0;\n    let multiplo = 2;\n\n    // Para cada dígito del Cuerpo\n    for(let i=1;i<=cuerpo.length;i++) {\n\n        // Obtener su Producto con el Múltiplo Correspondiente\n        let index = multiplo * valor.charAt(cuerpo.length - i);\n\n        // Sumar al Contador General\n        suma = suma + index;\n\n        // Consolidar Múltiplo dentro del rango [2,7]\n        if(multiplo < 7) { multiplo = multiplo + 1; } else { multiplo = 2; }\n        this.state.validRut = false;\n        \n    }\n\n    // Calcular Dígito Verificador en base al Módulo 11\n    let dvEsperado = 11 - (suma % 11);\n\n    // Casos Especiales (0 y K)\n    dv = (dv == 'K')?10:dv;\n    dv = (dv == 0)?11:dv;\n\n    // Validar que el Cuerpo coincide con su Dígito Verificador\n    if(dvEsperado != dv) {\n        this.state.validRut = false;\n        this.setState({invalidRut : true,isLoading : false })\n        document.getElementById(\"rut\").classList.add(\"error\");\n        return false;\n\n      }\n      else{\n        document.getElementById(\"rut\").classList.remove(\"error\");\n        this.setState({validRut : true});\n    }\n\n  }\n\n  handlePasswordChange(evt){\n    this.state.errorStatus = false;\n    document.getElementById('wentWrong').style.display = \"none\";\n    this.state.errors.password = \"\" ;\n    this.setState({ password: evt.target.value,isLoading : false,invalidRutPassword : false  });\n    var rutError = document.getElementById(\"rut\");\n    rutError.classList.remove(\"invalid-field\");\n    var passwordError = document.getElementById(\"password\");\n    passwordError.classList.remove(\"invalid-field\");\n  }\n\n  onCheckValidRut(){\n    var checkString = document.getElementById(\"rut\").value;\n    if (/[^A-Za-z0-9._-\\d]/.test(checkString)) {\n      this.setState({errorStatus : true,everFocusedRut:true})\n      this.state.errors.rut = \"Por favor, digite apenas letra e caracteres numéricos\"; //only nos and characters\n      document.getElementById(\"rut\").classList.remove(\"formLogin\");\n      document.getElementById(\"rut\").classList.add(\"error\");\n      return (false);\n    }\n    if (this.state.validRut == false) {\n       this.setState({invalidRut : true})\n       document.getElementById(\"rut\").classList.add(\"error\");\n    }\n    else {\n       this.setState({invalidRut : false,errorStatus : false,everFocusedRut:false})\n       document.getElementById(\"rut\").classList.remove(\"error\");\n    }\n  }\n\n  handleSubmit(evt){\n    evt.preventDefault();\n    const required  = \"This field is required!\";\n    let errors = this.state.errors;\n    var checkString = document.getElementById(\"rut\").value;\n    if(!this.state.rut){\n      var rutError = document.getElementById(\"rut\");\n      rutError.classList.add(\"invalid-field\");\n      this.state.errorStatus = true;\n      errors.rut = \"Rut es obligatorio!!\" ;\n\n\n    }\n    if(!this.state.password){\n       this.state.errorStatus = true;\n       errors.password = \"La clave es obligatoria!!\";\n       var passwordError = document.getElementById(\"password\");\n       passwordError.classList.add(\"invalid-field\");\n\n    }\n\n    if(this.state.rut){\n        // this.context.router.push('/create-password');\n        if ( /[^A-Za-z0-9._-\\d]/.test(checkString)) {\n            this.setState({errorStatus : true,everFocusedRut:true})\n            errors.rut = \"Por favor, digite apenas letra e caracteres numéricos\"; //only nos and characters\n            document.getElementById(\"rut\").classList.remove(\"formLogin\");\n            document.getElementById(\"rut\").classList.add(\"error\");\n            this.state.everFocusedRut = true;\n            return (false);\n        }\n\n        else {\n            if(this.state.password){\n              if(this.state.rut.length > 7 && this.state.validRut){\n                this.setState({isLoading : !this.state.isLoading})\n                let loginData = {\n                  username : this.state.rut,\n                  password: this.state.password,\n                  client_id: \"restClient\",\n                  client_secret: \"restSecret\",\n                  grant_type: \"password\",\n                  scope: \"portalConvenios\"\n                };\n                \n                \n\n                actions.checkLogin(loginData).done((data, status, headers) => {\n                    if (data.loginResponse && data.loginResponse.serviceStatus && data.loginResponse.serviceStatus.code == 200) {\n                      this.props.actions.saveAuthDataToStore(data);\n                      this.setState({isLoading : false})\n                      let value = data.loginResponse && data.loginResponse.solicitud && data.loginResponse.solicitud.length && (data.loginResponse.solicitud.length >0 ) ? data.loginResponse.solicitud[0].idSolicitud : \"\";\n                      let roles = data.loginResponse.solicitud && data.loginResponse.solicitud.length && (data.loginResponse.solicitud.length >0 ) && data.loginResponse.solicitud[0] && data.loginResponse.solicitud[0].moduleAccess ? data.loginResponse.solicitud[0].moduleAccess : \"\";\n                      roles = roles.map(function(x){ return x.toLowerCase() })\n                      localStorage.setItem('solicitud',value);\n                      localStorage.setItem('rut',loginData.username);\n                      localStorage.setItem('roles',JSON.stringify(roles));\n                      localStorage.setItem('lastlogin',data.loginResponse.lasLogin);\n                      localStorage.setItem('access_token',data.access_token);\n                      localStorage.setItem('ref-auth',data.refresh_token);\n                      if(JSON.parse(localStorage.getItem('roles')).indexOf('admin')!==-1 || JSON.parse(localStorage.getItem('roles')).indexOf('home')!==-1){\n                        this.context.router.push('/app/start');\n                      }else if(JSON.parse(localStorage.getItem('roles')).indexOf('vobo')!==-1){\n                          this.context.router.push('/app/visto-buena');\n                        }\n                        else if(JSON.parse(localStorage.getItem('roles')).indexOf('beneficios')!==-1){\n                          this.context.router.push('/app/benefits-alliances');\n                        }\n                        else if(JSON.parse(localStorage.getItem('roles')).indexOf('info_finance')!==-1){\n                          this.context.router.push('/app/financial-information');\n                        }\n                        else if(JSON.parse(localStorage.getItem('roles')).indexOf('user_search')!==-1){\n                          this.context.router.push('/app/search-partner');\n                        }\n                        else if(JSON.parse(localStorage.getItem('roles')).indexOf('planillas')!==-1){\n                          this.context.router.push('/app/planning');\n                        }\n                        else if(JSON.parse(localStorage.getItem('roles')).indexOf('user_admin')!==-1){\n                          this.context.router.push('/app/profile-administrator');\n                        }else{\n                          this.context.router.push('/app/default-app');\n                        }\n                    }\n                    if (data && data.loginResponse && data.loginResponse.serviceStatus && data.loginResponse.serviceStatus.code && data.loginResponse.serviceStatus.code == 400) {\n                      this.setState({invalidRut : false,wentWrong : false,blockError:true,isLoading : false})\n                    }\n                    if (data && data.loginResponse && data.loginResponse.serviceStatus && data.loginResponse.serviceStatus.code && data.loginResponse.serviceStatus.code == 300 && data.loginResponse.resetPassword == true) {\n                        this.props.actions.saveAuthDataToStore(data);\n                        let value = data.loginResponse && data.loginResponse.solicitud && data.loginResponse.solicitud.length && (data.loginResponse.solicitud.length >0 ) ? data.loginResponse.solicitud[0].idSolicitud : \"\";\n                        localStorage.setItem('rut',loginData.username);\n                        localStorage.setItem('solicitud',value);\n                        localStorage.setItem('lastlogin',data.loginResponse.lasLogin);\n                        localStorage.setItem('access_token',data.access_token);\n                        localStorage.setItem('ref-auth',data.refresh_token);\n                        this.context.router.push('/create-password');\n                    }\n                    if(data && data.loginResponse && data.loginResponse.serviceStatus && data.loginResponse.serviceStatus.code && data.loginResponse.serviceStatus.code == 500){\n                      this.setState({wentWrong : false,blockError:false,invalidRutPassword: true,isLoading : false})\n                    }\n\n                    if (data && data.loginResponse && data.loginResponse.serviceStatus && data.loginResponse.serviceStatus.code && data.loginResponse.serviceStatus.code == 800) {\n                      this.setState({wentWrong : true,blockError:false,invalidRut:false,isLoading : false})\n                    }\n                })\n              }\n              else{\n                  this.setState({invalidRut : false,errorStatus:true,isLoading : false})\n                  errors.rut = \"Rut o contraseña inválida \" ;\n                  var rutError = document.getElementById(\"rut\");\n                  rutError.classList.add(\"invalid-field\");\n              }\n\n            }\n\n            else {\n              this.state.errorStatus = true;\n              errors.rut = \"\" ;\n              errors.password = \"La clave es obligatoria!!\"\n              var passwordError = document.getElementById(\"password\");\n              passwordError.classList.add(\"invalid-field\");\n            }\n\n\n        }\n\n    }\n    this.setState({errors});\n    if(Object.keys(errors).length){\n       return '';\n    }\n  }\n\n  render() {\n    const {t} = this.props;\n\n    return (\n      <div class=\"user-pages login-page\">\n        \n        <div class=\"container user-container\">\n          <div class=\"logo\">\n            <img src=\"\" />\n          </div>\n          <div class=\"user-content\">\n          {this.state.blockError ?\n              <div class=\"msg error\">\n                <div class=\"icon\">\n                  <i class=\"fa fa-warning\"></i>\n                </div>\n                <div class=\"content\">\n                  <p>user-blocked</p>\n                </div>\n              </div>\n              : \"\"}\n\n              {this.state.wentWrong ?\n              <div class=\"msg error\">\n                <div class=\"icon\">\n                  <i class=\"fa fa-warning\"></i>\n                </div>\n                <div class=\"content\">\n                  <p>something-went-wrong</p>\n                </div>\n              </div>\n              : \"\"}\n                <div id= \"wentWrong\" class=\"msg error\">\n                <div class=\"icon\">\n                  <i class=\"fa fa-warning\"></i>\n                </div>\n                <div class=\"content\">\n                  <p>something-went-wrong</p>\n                </div>\n              </div>\n            {this.state.invalidRut ?\n              <div class=\"msg error\">\n                <div class=\"icon\">\n                  <i class=\"fa fa-warning\"></i>\n                </div>\n                <div class=\"content\">\n                  <p>invalid-rut</p>\n                </div>\n              </div> : \"\" }\n\n              {this.state.invalidRutPassword ?\n              <div class=\"msg error\">\n                <div class=\"icon\">\n                  <i class=\"fa fa-warning\"></i>\n                </div>\n                <div class=\"content\">\n                  <p>invalid-rut-password</p>\n                </div>\n              </div> : \"\" }\n\n            {this.state.errorStatus ?\n            <div class=\"msg error\">\n              <div class=\"icon\">\n                <i class=\"fa fa-warning\"></i>\n              </div>\n              <div class=\"content\">\n                {this.state.errors.rut ? <p>{this.state.errors.rut}</p> : \"\"}\n                {this.state.errors.password ? <p>{this.state.errors.password}</p> : \"\"}\n              </div>\n            </div> : \"\"}\n            <div class=\"form-header\">\n              <h1>login-page-text</h1>\n              <p>login-page-second-text</p>\n            </div>\n            <div class=\"user-form\">\n              <form>\n                <div class=\"form-group\">\n                  <input type=\"text\" id=\"rut\" class=\"form-control\" name=\"rut\" value={this.state.rut} onChange={(e)=> this.handleRutChange(\"rut\" , e.target.value)}  onBlur={this.onCheckValidRut}  placeholder=\"userid\" maxLength=\"12\"/>\n                  <div class=\"hint\">example-id</div>\n                </div>\n                <div class=\"form-group\">\n                  <input type=\"password\" id=\"password\" class=\"form-control\" name=\"password\" value={this.state.password} onChange={this.handlePasswordChange} placeholder=\"password\" maxLength=\"8\"/>\n                </div>\n                <div class=\"form-actions\">\n                  <div>\n                    <a href=\"#/request-password-captcha\">solitud-id</a>\n                  </div>\n                  <div>\n                    <button class=\"btn btn-primary\" onClick={this.handleSubmit}>user-login</button>\n                  </div>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nLoginPage.contextTypes = {\n  router: PropTypes.object.isRequired\n};\n\nLoginPage.propTypes = {\n  auth: PropTypes.object.isRequired,\n  userData: PropTypes.object.isRequired,\n  actions: PropTypes.object.isRequired\n};\n\nfunction mapStateToProps(state) {\n  return {\n    auth:state.auth,\n    userData: state.userData,\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators(actions, dispatch)\n  };\n}\n\n\nexport default  compose(connect(mapStateToProps,mapDispatchToProps))(LoginPage);\n\n\n"]},"metadata":{},"sourceType":"module"}