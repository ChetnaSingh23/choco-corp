{"ast":null,"code":"import _classCallCheck from \"/Users/chetna/Desktop/Site/my-app/choco-corp/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/chetna/Desktop/Site/my-app/choco-corp/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/chetna/Desktop/Site/my-app/choco-corp/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/chetna/Desktop/Site/my-app/choco-corp/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/chetna/Desktop/Site/my-app/choco-corp/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/chetna/Desktop/Site/my-app/choco-corp/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/chetna/Desktop/Site/my-app/choco-corp/src/components/SignUpPage.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport * as actions from '../actions/index';\n\nvar SignUpPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SignUpPage, _Component);\n\n  function SignUpPage(props) {\n    var _this;\n\n    _classCallCheck(this, SignUpPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SignUpPage).call(this, props));\n    _this.state = {\n      rut: \"\",\n      password: \"\",\n      everFocusedRut: false,\n      everFocusedPassword: false,\n      inFocus: \"\",\n      errors: {},\n      blockError: false,\n      invalidRut: false,\n      errorStatus: false,\n      validRut: false,\n      wentWrong: false,\n      isLoading: false,\n      invalidRutPassword: false\n    };\n    _this.handleRutChange = _this.handleRutChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handlePasswordChange = _this.handlePasswordChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onCheckValidRut = _this.onCheckValidRut.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(SignUpPage, [{\n    key: \"handleRutChange\",\n    value: function handleRutChange(name, rutt) {\n      this.setState({\n        rut: rutt\n      });\n    }\n  }, {\n    key: \"handlePasswordChange\",\n    value: function handlePasswordChange(evt) {\n      this.state.errorStatus = false;\n      document.getElementById('wentWrong').style.display = \"none\";\n      this.state.errors.password = \"\";\n      this.setState({\n        password: evt.target.value,\n        isLoading: false,\n        invalidRutPassword: false\n      });\n      var rutError = document.getElementById(\"rut\");\n      rutError.classList.remove(\"invalid-field\");\n      var passwordError = document.getElementById(\"password\");\n      passwordError.classList.remove(\"invalid-field\");\n    }\n  }, {\n    key: \"onCheckValidRut\",\n    value: function onCheckValidRut() {\n      var checkString = document.getElementById(\"rut\").value;\n\n      if (/[^A-Za-z0-9._-\\d]/.test(checkString)) {\n        this.setState({\n          errorStatus: true,\n          everFocusedRut: true\n        });\n        this.state.errors.rut = \"Por favor, digite apenas letra e caracteres numéricos\"; //only nos and characters\n\n        document.getElementById(\"rut\").classList.remove(\"formLogin\");\n        document.getElementById(\"rut\").classList.add(\"error\");\n        return false;\n      }\n\n      if (this.state.validRut == false) {\n        this.setState({\n          invalidRut: true\n        });\n        document.getElementById(\"rut\").classList.add(\"error\");\n      } else {\n        this.setState({\n          invalidRut: false,\n          errorStatus: false,\n          everFocusedRut: false\n        });\n        document.getElementById(\"rut\").classList.remove(\"error\");\n      }\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(evt) {\n      var _this2 = this;\n\n      evt.preventDefault();\n      var required = \"This field is required!\";\n      var errors = this.state.errors;\n      var checkString = document.getElementById(\"rut\").value;\n\n      if (!this.state.rut) {\n        var rutError = document.getElementById(\"rut\");\n        rutError.classList.add(\"invalid-field\");\n        this.state.errorStatus = true;\n        errors.rut = \"Rut es obligatorio!!\";\n      }\n\n      if (!this.state.password) {\n        this.state.errorStatus = true;\n        errors.password = \"La clave es obligatoria!!\";\n        var passwordError = document.getElementById(\"password\");\n        passwordError.classList.add(\"invalid-field\");\n      }\n\n      if (this.state.rut) {\n        // this.context.router.push('/create-password');\n        if (/[^A-Za-z0-9._-\\d]/.test(checkString)) {\n          this.setState({\n            errorStatus: true,\n            everFocusedRut: true\n          });\n          errors.rut = \"Por favor, digite apenas letra e caracteres numéricos\"; //only nos and characters\n\n          document.getElementById(\"rut\").classList.remove(\"formLogin\");\n          document.getElementById(\"rut\").classList.add(\"error\");\n          this.state.everFocusedRut = true;\n          return false;\n        } else {\n          if (this.state.password) {\n            if (this.state.rut.length > 7 && this.state.validRut) {\n              this.setState({\n                isLoading: !this.state.isLoading\n              });\n              var loginData = {\n                username: this.state.rut,\n                password: this.state.password,\n                client_id: \"restClient\",\n                client_secret: \"restSecret\",\n                grant_type: \"password\",\n                scope: \"portalConvenios\"\n              };\n              actions.checkLogin(loginData).done(function (data, status, headers) {\n                if (data.loginResponse && data.loginResponse.serviceStatus && data.loginResponse.serviceStatus.code == 200) {\n                  _this2.props.actions.saveAuthDataToStore(data);\n\n                  _this2.setState({\n                    isLoading: false\n                  });\n\n                  var value = data.loginResponse && data.loginResponse.solicitud && data.loginResponse.solicitud.length && data.loginResponse.solicitud.length > 0 ? data.loginResponse.solicitud[0].idSolicitud : \"\";\n                  var roles = data.loginResponse.solicitud && data.loginResponse.solicitud.length && data.loginResponse.solicitud.length > 0 && data.loginResponse.solicitud[0] && data.loginResponse.solicitud[0].moduleAccess ? data.loginResponse.solicitud[0].moduleAccess : \"\";\n                  roles = roles.map(function (x) {\n                    return x.toLowerCase();\n                  });\n                  localStorage.setItem('solicitud', value);\n                  localStorage.setItem('rut', loginData.username);\n                  localStorage.setItem('roles', JSON.stringify(roles));\n                  localStorage.setItem('lastlogin', data.loginResponse.lasLogin);\n                  localStorage.setItem('access_token', data.access_token);\n                  localStorage.setItem('ref-auth', data.refresh_token);\n\n                  if (JSON.parse(localStorage.getItem('roles')).indexOf('admin') !== -1 || JSON.parse(localStorage.getItem('roles')).indexOf('home') !== -1) {\n                    _this2.context.router.push('/app/start');\n                  } else if (JSON.parse(localStorage.getItem('roles')).indexOf('vobo') !== -1) {\n                    _this2.context.router.push('/app/visto-buena');\n                  } else if (JSON.parse(localStorage.getItem('roles')).indexOf('beneficios') !== -1) {\n                    _this2.context.router.push('/app/benefits-alliances');\n                  } else if (JSON.parse(localStorage.getItem('roles')).indexOf('info_finance') !== -1) {\n                    _this2.context.router.push('/app/financial-information');\n                  } else if (JSON.parse(localStorage.getItem('roles')).indexOf('user_search') !== -1) {\n                    _this2.context.router.push('/app/search-partner');\n                  } else if (JSON.parse(localStorage.getItem('roles')).indexOf('planillas') !== -1) {\n                    _this2.context.router.push('/app/planning');\n                  } else if (JSON.parse(localStorage.getItem('roles')).indexOf('user_admin') !== -1) {\n                    _this2.context.router.push('/app/profile-administrator');\n                  } else {\n                    _this2.context.router.push('/app/default-app');\n                  }\n                }\n\n                if (data && data.loginResponse && data.loginResponse.serviceStatus && data.loginResponse.serviceStatus.code && data.loginResponse.serviceStatus.code == 400) {\n                  _this2.setState({\n                    invalidRut: false,\n                    wentWrong: false,\n                    blockError: true,\n                    isLoading: false\n                  });\n                }\n\n                if (data && data.loginResponse && data.loginResponse.serviceStatus && data.loginResponse.serviceStatus.code && data.loginResponse.serviceStatus.code == 300 && data.loginResponse.resetPassword == true) {\n                  _this2.props.actions.saveAuthDataToStore(data);\n\n                  var _value = data.loginResponse && data.loginResponse.solicitud && data.loginResponse.solicitud.length && data.loginResponse.solicitud.length > 0 ? data.loginResponse.solicitud[0].idSolicitud : \"\";\n\n                  localStorage.setItem('rut', loginData.username);\n                  localStorage.setItem('solicitud', _value);\n                  localStorage.setItem('lastlogin', data.loginResponse.lasLogin);\n                  localStorage.setItem('access_token', data.access_token);\n                  localStorage.setItem('ref-auth', data.refresh_token);\n\n                  _this2.context.router.push('/create-password');\n                }\n\n                if (data && data.loginResponse && data.loginResponse.serviceStatus && data.loginResponse.serviceStatus.code && data.loginResponse.serviceStatus.code == 500) {\n                  _this2.setState({\n                    wentWrong: false,\n                    blockError: false,\n                    invalidRutPassword: true,\n                    isLoading: false\n                  });\n                }\n\n                if (data && data.loginResponse && data.loginResponse.serviceStatus && data.loginResponse.serviceStatus.code && data.loginResponse.serviceStatus.code == 800) {\n                  _this2.setState({\n                    wentWrong: true,\n                    blockError: false,\n                    invalidRut: false,\n                    isLoading: false\n                  });\n                }\n              });\n            } else {\n              this.setState({\n                invalidRut: false,\n                errorStatus: true,\n                isLoading: false\n              });\n              errors.rut = \"Rut o contraseña inválida \";\n              var rutError = document.getElementById(\"rut\");\n              rutError.classList.add(\"invalid-field\");\n            }\n          } else {\n            this.state.errorStatus = true;\n            errors.rut = \"\";\n            errors.password = \"La clave es obligatoria!!\";\n            var passwordError = document.getElementById(\"password\");\n            passwordError.classList.add(\"invalid-field\");\n          }\n        }\n      }\n\n      this.setState({\n        errors: errors\n      });\n\n      if (Object.keys(errors).length) {\n        return '';\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var t = this.props.t;\n      return React.createElement(\"div\", {\n        className: \"user-pages login-page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container user-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"user-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, this.state.blockError ? React.createElement(\"div\", {\n        className: \"msg error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, \"user-blocked\"))) : \"\", this.state.wentWrong ? React.createElement(\"div\", {\n        className: \"msg error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, \"something-went-wrong\"))) : \"\", React.createElement(\"div\", {\n        id: \"wentWrong\",\n        className: \"msg error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, \"something-went-wrong\"))), this.state.invalidRut ? React.createElement(\"div\", {\n        className: \"msg error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, \"invalid-rut\"))) : \"\", this.state.invalidRutPassword ? React.createElement(\"div\", {\n        className: \"msg error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      }, \"invalid-rut-password\"))) : \"\", this.state.errorStatus ? React.createElement(\"div\", {\n        className: \"msg error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }, this.state.errors.rut ? React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, this.state.errors.rut) : \"\", this.state.errors.password ? React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, this.state.errors.password) : \"\")) : \"\", React.createElement(\"div\", {\n        className: \"form-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, \"Login\")), React.createElement(\"div\", {\n        className: \"user-form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        id: \"rut\",\n        className: \"form-control\",\n        name: \"rut\",\n        value: this.state.rut,\n        onChange: function onChange(e) {\n          return _this3.handleRutChange(\"rut\", e.target.value);\n        },\n        onBlur: this.onCheckValidRut,\n        placeholder: \"userid\",\n        maxLength: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"hint\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }, \"example 12345678-3\")), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"password\",\n        id: \"password\",\n        className: \"form-control\",\n        name: \"password\",\n        value: this.state.password,\n        onChange: this.handlePasswordChange,\n        placeholder: \"password\",\n        maxLength: \"8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-actions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"#/request-password-captcha\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }, \"solitud-id\")), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292\n        },\n        __self: this\n      }, \"user-login\"))))))));\n    }\n  }]);\n\n  return SignUpPage;\n}(Component);\n\nSignUpPage.contextTypes = {\n  router: PropTypes.object.isRequired\n};\nexport default SignUpPage;","map":{"version":3,"sources":["/Users/chetna/Desktop/Site/my-app/choco-corp/src/components/SignUpPage.js"],"names":["React","Component","PropTypes","actions","SignUpPage","props","state","rut","password","everFocusedRut","everFocusedPassword","inFocus","errors","blockError","invalidRut","errorStatus","validRut","wentWrong","isLoading","invalidRutPassword","handleRutChange","bind","handlePasswordChange","handleSubmit","onCheckValidRut","name","rutt","setState","evt","document","getElementById","style","display","target","value","rutError","classList","remove","passwordError","checkString","test","add","preventDefault","required","length","loginData","username","client_id","client_secret","grant_type","scope","checkLogin","done","data","status","headers","loginResponse","serviceStatus","code","saveAuthDataToStore","solicitud","idSolicitud","roles","moduleAccess","map","x","toLowerCase","localStorage","setItem","JSON","stringify","lasLogin","access_token","refresh_token","parse","getItem","indexOf","context","router","push","resetPassword","Object","keys","t","e","contextTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport * as actions from '../actions/index';\n\n\nclass SignUpPage extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      rut:\"\",\n      password:\"\",\n      everFocusedRut: false,\n      everFocusedPassword: false,\n      inFocus: \"\",\n      errors : {},\n      blockError : false,\n      invalidRut: false,\n      errorStatus : false,\n      validRut : false,\n      wentWrong : false,\n      isLoading : false,\n      invalidRutPassword : false,\n    }\n\n    this.handleRutChange = this.handleRutChange.bind(this);\n    this.handlePasswordChange = this.handlePasswordChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.onCheckValidRut = this.onCheckValidRut.bind(this)\n\n  }\n\n \n\n  handleRutChange(name,rutt){\n    \n\n    this.setState({ rut : rutt})\n\n  }\n\n  handlePasswordChange(evt){\n    this.state.errorStatus = false;\n    document.getElementById('wentWrong').style.display = \"none\";\n    this.state.errors.password = \"\" ;\n    this.setState({ password: evt.target.value,isLoading : false,invalidRutPassword : false  });\n    var rutError = document.getElementById(\"rut\");\n    rutError.classList.remove(\"invalid-field\");\n    var passwordError = document.getElementById(\"password\");\n    passwordError.classList.remove(\"invalid-field\");\n  }\n\n  onCheckValidRut(){\n    var checkString = document.getElementById(\"rut\").value;\n    if (/[^A-Za-z0-9._-\\d]/.test(checkString)) {\n      this.setState({errorStatus : true,everFocusedRut:true})\n      this.state.errors.rut = \"Por favor, digite apenas letra e caracteres numéricos\"; //only nos and characters\n      document.getElementById(\"rut\").classList.remove(\"formLogin\");\n      document.getElementById(\"rut\").classList.add(\"error\");\n      return (false);\n    }\n    if (this.state.validRut == false) {\n       this.setState({invalidRut : true})\n       document.getElementById(\"rut\").classList.add(\"error\");\n    }\n    else {\n       this.setState({invalidRut : false,errorStatus : false,everFocusedRut:false})\n       document.getElementById(\"rut\").classList.remove(\"error\");\n    }\n  }\n\n  handleSubmit(evt){\n    evt.preventDefault();\n    const required  = \"This field is required!\";\n    let errors = this.state.errors;\n    var checkString = document.getElementById(\"rut\").value;\n    if(!this.state.rut){\n      var rutError = document.getElementById(\"rut\");\n      rutError.classList.add(\"invalid-field\");\n      this.state.errorStatus = true;\n      errors.rut = \"Rut es obligatorio!!\" ;\n\n\n    }\n    if(!this.state.password){\n       this.state.errorStatus = true;\n       errors.password = \"La clave es obligatoria!!\";\n       var passwordError = document.getElementById(\"password\");\n       passwordError.classList.add(\"invalid-field\");\n\n    }\n\n    if(this.state.rut){\n        // this.context.router.push('/create-password');\n        if ( /[^A-Za-z0-9._-\\d]/.test(checkString)) {\n            this.setState({errorStatus : true,everFocusedRut:true})\n            errors.rut = \"Por favor, digite apenas letra e caracteres numéricos\"; //only nos and characters\n            document.getElementById(\"rut\").classList.remove(\"formLogin\");\n            document.getElementById(\"rut\").classList.add(\"error\");\n            this.state.everFocusedRut = true;\n            return (false);\n        }\n\n        else {\n            if(this.state.password){\n              if(this.state.rut.length > 7 && this.state.validRut){\n                this.setState({isLoading : !this.state.isLoading})\n                let loginData = {\n                  username : this.state.rut,\n                  password: this.state.password,\n                  client_id: \"restClient\",\n                  client_secret: \"restSecret\",\n                  grant_type: \"password\",\n                  scope: \"portalConvenios\"\n                };\n                \n                \n\n                actions.checkLogin(loginData).done((data, status, headers) => {\n                    if (data.loginResponse && data.loginResponse.serviceStatus && data.loginResponse.serviceStatus.code == 200) {\n                      this.props.actions.saveAuthDataToStore(data);\n                      this.setState({isLoading : false})\n                      let value = data.loginResponse && data.loginResponse.solicitud && data.loginResponse.solicitud.length && (data.loginResponse.solicitud.length >0 ) ? data.loginResponse.solicitud[0].idSolicitud : \"\";\n                      let roles = data.loginResponse.solicitud && data.loginResponse.solicitud.length && (data.loginResponse.solicitud.length >0 ) && data.loginResponse.solicitud[0] && data.loginResponse.solicitud[0].moduleAccess ? data.loginResponse.solicitud[0].moduleAccess : \"\";\n                      roles = roles.map(function(x){ return x.toLowerCase() })\n                      localStorage.setItem('solicitud',value);\n                      localStorage.setItem('rut',loginData.username);\n                      localStorage.setItem('roles',JSON.stringify(roles));\n                      localStorage.setItem('lastlogin',data.loginResponse.lasLogin);\n                      localStorage.setItem('access_token',data.access_token);\n                      localStorage.setItem('ref-auth',data.refresh_token);\n                      if(JSON.parse(localStorage.getItem('roles')).indexOf('admin')!==-1 || JSON.parse(localStorage.getItem('roles')).indexOf('home')!==-1){\n                        this.context.router.push('/app/start');\n                      }else if(JSON.parse(localStorage.getItem('roles')).indexOf('vobo')!==-1){\n                          this.context.router.push('/app/visto-buena');\n                        }\n                        else if(JSON.parse(localStorage.getItem('roles')).indexOf('beneficios')!==-1){\n                          this.context.router.push('/app/benefits-alliances');\n                        }\n                        else if(JSON.parse(localStorage.getItem('roles')).indexOf('info_finance')!==-1){\n                          this.context.router.push('/app/financial-information');\n                        }\n                        else if(JSON.parse(localStorage.getItem('roles')).indexOf('user_search')!==-1){\n                          this.context.router.push('/app/search-partner');\n                        }\n                        else if(JSON.parse(localStorage.getItem('roles')).indexOf('planillas')!==-1){\n                          this.context.router.push('/app/planning');\n                        }\n                        else if(JSON.parse(localStorage.getItem('roles')).indexOf('user_admin')!==-1){\n                          this.context.router.push('/app/profile-administrator');\n                        }else{\n                          this.context.router.push('/app/default-app');\n                        }\n                    }\n                    if (data && data.loginResponse && data.loginResponse.serviceStatus && data.loginResponse.serviceStatus.code && data.loginResponse.serviceStatus.code == 400) {\n                      this.setState({invalidRut : false,wentWrong : false,blockError:true,isLoading : false})\n                    }\n                    if (data && data.loginResponse && data.loginResponse.serviceStatus && data.loginResponse.serviceStatus.code && data.loginResponse.serviceStatus.code == 300 && data.loginResponse.resetPassword == true) {\n                        this.props.actions.saveAuthDataToStore(data);\n                        let value = data.loginResponse && data.loginResponse.solicitud && data.loginResponse.solicitud.length && (data.loginResponse.solicitud.length >0 ) ? data.loginResponse.solicitud[0].idSolicitud : \"\";\n                        localStorage.setItem('rut',loginData.username);\n                        localStorage.setItem('solicitud',value);\n                        localStorage.setItem('lastlogin',data.loginResponse.lasLogin);\n                        localStorage.setItem('access_token',data.access_token);\n                        localStorage.setItem('ref-auth',data.refresh_token);\n                        this.context.router.push('/create-password');\n                    }\n                    if(data && data.loginResponse && data.loginResponse.serviceStatus && data.loginResponse.serviceStatus.code && data.loginResponse.serviceStatus.code == 500){\n                      this.setState({wentWrong : false,blockError:false,invalidRutPassword: true,isLoading : false})\n                    }\n\n                    if (data && data.loginResponse && data.loginResponse.serviceStatus && data.loginResponse.serviceStatus.code && data.loginResponse.serviceStatus.code == 800) {\n                      this.setState({wentWrong : true,blockError:false,invalidRut:false,isLoading : false})\n                    }\n                })\n              }\n              else{\n                  this.setState({invalidRut : false,errorStatus:true,isLoading : false})\n                  errors.rut = \"Rut o contraseña inválida \" ;\n                  var rutError = document.getElementById(\"rut\");\n                  rutError.classList.add(\"invalid-field\");\n              }\n\n            }\n\n            else {\n              this.state.errorStatus = true;\n              errors.rut = \"\" ;\n              errors.password = \"La clave es obligatoria!!\"\n              var passwordError = document.getElementById(\"password\");\n              passwordError.classList.add(\"invalid-field\");\n            }\n\n\n        }\n\n    }\n    this.setState({errors});\n    if(Object.keys(errors).length){\n       return '';\n    }\n  }\n\n  render() {\n    const {t} = this.props;\n\n    return (\n      <div className=\"user-pages login-page\">\n        \n        <div className=\"container user-container\">\n          <div className=\"logo\">\n            <img src=\"\" />\n          </div>\n          <div className=\"user-content\">\n          {this.state.blockError ?\n              <div className=\"msg error\">\n                <div className=\"icon\">\n                  <i className=\"fa fa-warning\"></i>\n                </div>\n                <div className=\"content\">\n                  <p>user-blocked</p>\n                </div>\n              </div>\n              : \"\"}\n\n              {this.state.wentWrong ?\n              <div className=\"msg error\">\n                <div className=\"icon\">\n                  <i className=\"fa fa-warning\"></i>\n                </div>\n                <div className=\"content\">\n                  <p>something-went-wrong</p>\n                </div>\n              </div>\n              : \"\"}\n                <div id= \"wentWrong\" className=\"msg error\">\n                <div className=\"icon\">\n                  <i className=\"fa fa-warning\"></i>\n                </div>\n                <div className=\"content\">\n                  <p>something-went-wrong</p>\n                </div>\n              </div>\n            {this.state.invalidRut ?\n              <div className=\"msg error\">\n                <div className=\"icon\">\n                  <i className=\"fa fa-warning\"></i>\n                </div>\n                <div className=\"content\">\n                  <p>invalid-rut</p>\n                </div>\n              </div> : \"\" }\n\n              {this.state.invalidRutPassword ?\n              <div className=\"msg error\">\n                <div className=\"icon\">\n                  <i className=\"fa fa-warning\"></i>\n                </div>\n                <div className=\"content\">\n                  <p>invalid-rut-password</p>\n                </div>\n              </div> : \"\" }\n\n            {this.state.errorStatus ?\n            <div className=\"msg error\">\n              <div className=\"icon\">\n                <i className=\"fa fa-warning\"></i>\n              </div>\n              <div className=\"content\">\n                {this.state.errors.rut ? <p>{this.state.errors.rut}</p> : \"\"}\n                {this.state.errors.password ? <p>{this.state.errors.password}</p> : \"\"}\n              </div>\n            </div> : \"\"}\n            <div className=\"form-header\">\n              <h1>Login</h1>\n            </div>\n            <div className=\"user-form\">\n              <form>\n                <div className=\"form-group\">\n                  <input type=\"text\" id=\"rut\" className=\"form-control\" name=\"rut\" value={this.state.rut} onChange={(e)=> this.handleRutChange(\"rut\" , e.target.value)}  onBlur={this.onCheckValidRut}  placeholder=\"userid\" maxLength=\"12\"/>\n                  <div className=\"hint\">example 12345678-3</div>\n                </div>\n                <div className=\"form-group\">\n                  <input type=\"password\" id=\"password\" className=\"form-control\" name=\"password\" value={this.state.password} onChange={this.handlePasswordChange} placeholder=\"password\" maxLength=\"8\"/>\n                </div>\n                <div className=\"form-actions\">\n                  <div>\n                    <a href=\"#/request-password-captcha\">solitud-id</a>\n                  </div>\n                  <div>\n                    <button className=\"btn btn-primary\" onClick={this.handleSubmit}>user-login</button>\n                  </div>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nSignUpPage.contextTypes = {\n  router: PropTypes.object.isRequired\n};\n\n\n\nexport default  SignUpPage;\n\n\n"]},"metadata":{},"sourceType":"module"}